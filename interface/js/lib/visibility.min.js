/*
 * Visibility.js 2.0.2 (https://github.com/ai/visibilityjs)
 * Copyright (c) 2011, Andrey Sitnik, MIT
 */
!function(e){var n=-1,r={onVisible:function(n){var e=r.isSupported();if(!e||!r.hidden())return n(),e;var t=r.change(function(e,i){r.hidden()||(r.unbind(t),n())});return t},change:function(e){if(!r.isSupported())return!1;var i=n+=1;return r._callbacks[i]=e,r._listen(),i},unbind:function(e){delete r._callbacks[e]},afterPrerendering:function(n){var e=r.isSupported(),t="prerender";if(!e||t!=r.state())return n(),e;var d=r.change(function(e,i){t!=i&&(r.unbind(d),n())});return d},hidden:function(){return!(!r._doc.hidden&&!r._doc.webkitHidden)},state:function(){return r._doc.visibilityState||r._doc.webkitVisibilityState||"visible"},isSupported:function(){return void 0!==r._doc.hidden||void 0!==r._doc.webkitHidden},_doc:document||{},_callbacks:{},_change:function(e){var i=r.state();for(var n in r._callbacks)r._callbacks[n].call(r._doc,e,i)},_listen:function(){if(!r._init){var e="visibilitychange";r._doc.webkitVisibilityState&&(e="webkit"+e);function i(){r._change.apply(r,arguments)}r._doc.addEventListener?r._doc.addEventListener(e,i):r._doc.attachEvent(e,i),r._init=!0}}};"undefined"!=typeof module&&module.exports?module.exports=r:e.Visibility=r}(this),function(a){function e(o){return o.every=function(e,i,n){o._time(),n||(n=i,i=null);var t=d+=1;return o._timers[t]={visible:e,hidden:i,callback:n},o._run(t,!1),o.isSupported()&&o._listen(),t},o.stop=function(e){return!!o._timers[e]&&(o._stop(e),delete o._timers[e],!0)},o._timers={},o._time=function(){o._timed||(o._timed=!0,o._wasHidden=o.hidden(),o.change(function(){o._stopRun(),o._wasHidden=o.hidden()}))},o._run=function(e,i){var n,t=o._timers[e];if(o.hidden()){if(null===t.hidden)return;n=t.hidden}else n=t.visible;function d(){t.last=new Date,t.callback.call(a)}if(i){var r=new Date-t.last;r<n?t.delay=setTimeout(function(){t.id=setInterval(d,n),d()},n-r):(t.id=setInterval(d,n),d())}else t.id=setInterval(d,n)},o._stop=function(e){var i=o._timers[e];clearInterval(i.id),clearTimeout(i.delay),delete i.id,delete i.delay},o._stopRun=function(e){var i=o.hidden(),n=o._wasHidden;if(i&&!n||!i&&n)for(var t in o._timers)o._stop(t),o._run(t,!i)},o}var d=-1;"undefined"!=typeof module&&module.exports?module.exports=e(require("./visibility.core")):e(a.Visibility||require("./visibility.core"))}(window);
